!function(){document.addEventListener("DOMContentLoaded",function(){var n=$(".liebiao");n.on("singleTap",function(){"none"==$(this).find(".caidan").css("display")?$(this).parent().find(".caidan").css({display:"block"}):$(this).find(".caidan").css({display:"none"})});var e=localStorage.getItem("userdata");e=e?JSON.parse(e):[];var o=$("#mytel");$.each(e,function(n,e){o.html(e.userphone),console.log(e.userphone)}),$(".jiantou .badge").on("click",function(){location.href="perfect.html"})})}(),$(function(){$(".footer li").eq(0).click(function(){$("#homeicon1").css({color:"#8e488e"}),$("#homeicon2").css({color:"#777"}),$("#homeicon3").css({color:"#777"}),$("#homeicon4").css({color:"#777"}),$("#homeicon5").css({color:"#777"})}),$(".footer li").eq(1).click(function(){$("#homeicon1").css({color:"#777"}),$("#homeicon2").css({color:"#8e488e"}),$("#homeicon3").css({color:"#777"}),$("#homeicon4").css({color:"#777"}),$("#homeicon5").css({color:"#777"})}),$(".footer li").eq(2).click(function(){$("#homeicon1").css({color:"#777"}),$("#homeicon2").css({color:"#777"}),$("#homeicon3").css({color:"#8e488e"}),$("#homeicon4").css({color:"#777"}),$("#homeicon5").css({color:"#777"})}),$(".footer li").eq(3).click(function(){$("#homeicon1").css({color:"#777"}),$("#homeicon2").css({color:"#777"}),$("#homeicon3").css({color:"#777"}),$("#homeicon4").css({color:"#8e488e"}),$("#homeicon5").css({color:"#777"})}),$(".footer li").eq(4).click(function(){$("#homeicon1").css({color:"#777"}),$("#homeicon2").css({color:"#777"}),$("#homeicon3").css({color:"#777"}),$("#homeicon4").css({color:"#777"}),$("#homeicon5").css({color:"#8e488e"})})}),$(function(){var n=$(document),e=$("#nav_btn"),o=$("#nav_list");e.on("singleTap",function(){console.log(123),"none"==o.css("display")?o.show():o.hide()}),n.on("singleTap",function(){"block"==o.css("display")&&o.hide()});var t=(new Swiper(".swiper-container1",{direction:"horizontal",pagination:".swiper-pagination"}),new Swiper(".swiper-container",{direction:"horizontal",autoHeight:!0})),n=$(document),a=$("#btn"),i=a.find("a");a.on("singleTap","a",function(){i.removeClass(),$(this).addClass("atver");var n=$(this).index();t.slideTo(n,500,!1)});var s=localStorage.getItem("goodsdata");s=s?JSON.parse(s):[],$("#goods_num").text(s.length);var l=$("#s_cart");l.on("singleTap",function(){var n=$("#goods_name").text(),e=$("#price").text(),o=$("#goods_img").find("img").attr("src");s.push({name:n,price:e,img:o}),localStorage.setItem("goodsdata",JSON.stringify(s)),s=localStorage.getItem("goodsdata"),s=JSON.parse(s),$("#goods_num").text(s.length)})}),function(){document.addEventListener("DOMContentLoaded",function(){var n=$(".liebiao");console.log(n),n.on("singleTap",function(){"none"==$(this).find(".caidan").css("display")?$(this).parent().find(".caidan").css({display:"block"}):$(this).find(".caidan").css({display:"none"})})})}(),window.onload=function(){new Swiper(".swiper-container",{autoplay:2e3,loop:!0,pagination:".swiper-pagination"});$(function(){var n=$(".datalist1"),e=$("<ul/>");$.ajax({type:"get",async:!0,url:"json/datalist1.json",success:function(o){$.each(o,function(n,o){var t=$("<li/>");$("<a/>").attr({href:o.url}).html('<img src="'+o.imgurl+'"/>').appendTo(t),t.appendTo(e)}),n.append(e)}})}),$(function(){var n=$(".datalist2"),e=$("<ul/>");$.ajax({type:"get",async:!0,url:"json/datalist2.json",success:function(o){$.each(o,function(n,o){var t=$("<li/>");$("<a/>").attr({href:o.url}).html('<img data-original="'+o.imgurl+'"/>').appendTo(t),t.appendTo(e)}),n.append(e),$("img").lazyload({effect:"fadeIn"})}})}),$(function(){var n=$(".datalist3"),e=$("<ul/>");$.ajax({type:"get",async:!0,url:"json/datalist3.json",success:function(o){$.each(o,function(n,o){var t=$("<li/>");$("<a/>").attr({href:o.url}).html('<img data-original="'+o.imgurl+'"/>').appendTo(t),$("<p/>").addClass("title").html(o.title).appendTo(t),$("<p/>").addClass("price").html("<span>&yen;"+o.price).appendTo(t),t.appendTo(e)}),n.append(e),$("img").lazyload({effect:"fadeIn"})}})}),$(function(){$(".comeback").hide(),$(window).scroll(function(){$(window).scrollTop()>500?$(".comeback").fadeIn():$(".comeback").fadeOut()}),$(".comeback").on("click",function(){$("html body").animate({scrollTop:0})})}),$(function(){$("#homeicon1").css({color:"#8e488e"})})},jQuery(function(){var n=$(".nav_s .nav li"),e=$("h1.tip");n.on("singleTap",function(){$(this).addClass("my_nobg"),$(this).siblings().removeClass("my_nobg"),$(this).find("a").addClass("my_color"),$(this).siblings().find("a").removeClass("my_color"),e.text($(this).text())});var o=$(".nav_s .nav li"),t=$("article article"),a=$(".datalist"),i=0;$(o).click(function(){i=$(this).index(),a.empty(),$.ajax()}),$.ajaxSetup({url:"../json/goods.json",success:function(n){$.each(n,function(n,e){if((0==i||3==i||6==i||9==i)&&1==e.page){var o=$("<li/>");o.addClass(".my_li"),$("<a/>").addClass("my_a").attr("href","goods_details.html").html($("<img/>").addClass("my_img").attr("src",e.imgurl)).appendTo(o),$("<a/>").addClass("title_a").attr("href","goods_details.html").html($("<p/>").addClass("my_p").html(e.title)).appendTo(o),o.appendTo(a)}if((1==i||4==i||7==i)&&2==e.page){var o=$("<li/>");o.addClass(".my_li"),$("<a/>").addClass("my_a").attr("href","goods_details.html").html($("<img/>").addClass("my_img").attr("src",e.imgurl)).appendTo(o),$("<a/>").addClass("title_a").attr("href","goods_details.html").html($("<p/>").addClass("my_p").html(e.title)).appendTo(o),o.appendTo(a)}if((2==i||5==i||8==i)&&3==e.page){var o=$("<li/>");o.addClass(".my_li"),$("<a/>").addClass("my_a").attr("href","goods_details.html").html($("<img/>").addClass("my_img").attr("src",e.imgurl)).appendTo(o),$("<a/>").addClass("title_a").attr("href","goods_details.html").html($("<p/>").addClass("my_p").html(e.title)).appendTo(o),o.appendTo(a)}}),a.appendTo(t)}}),$.ajax(),$(window).on("scroll",function(){var n=$(window).scrollTop();n>=$(document).height()-$(window).height()-3e3&&$.ajax()})}),function(){document.addEventListener("DOMContentLoaded",function(){var n=[!1,!1],e=localStorage.getItem("userdata");e=e?JSON.parse(e):[],console.log(e),e.length>0&&($("#phone").val(e[0].userphone),$("#password").val(e[0].password),n[0]=!0,n[1]=!0,console.log(n)),$("#phone").blur(function(){var e=$(this).val();if(""!=e){var o=/^[1-3]\d{10}$/.test(e);o?n[0]=!0:n[0]=!1}}),$("#password").blur(function(){var e=$(this).val();e.length>=6?n[1]=!0:n[1]=!1}),$("form").submit(function(){for(var e=!0,o=0;o<n.length;o++)0==n[o]&&(e=!1);if(console.log(n),!e)return 0==n[0]&&($(".prompt").css({display:"block"}).html("请正确填写手机号码哦"),$("#phone").css({border:"1px solid #F16E42"}),setTimeout(function(){$(".prompt").css({display:"none"}).html(""),$("#phone").css({border:"1px solid #D1D5D8"})},5e3)),0==n[1]&&($(".prompt1").css({display:"block"}).html("至少填写6个字符"),$("#password").css({border:"1px solid #F16E42"}),setTimeout(function(){$(".prompt1").css({display:"none"}).html(""),$("#password").css({border:"1px solid #D1D5D8"})},5e3)),!1;var t=$("#phone").val(),a=$("#password").val();console.log(t),console.log(a);var i=[],s={userphone:t,password:a};i.push(s),localStorage.setItem("userdata",JSON.stringify(i))})})}(),function(){document.addEventListener("DOMContentLoaded",function(){var n=$(".order_details"),e=localStorage.getItem("buydata");e=e?JSON.parse(e):[],e.length>0&&e.forEach(function(e,o){var t=$("<div/>"),a=($("<div/>").addClass("header").html("<span>店铺一</span><span>交易完成</span>").appendTo(t),$("<div/>").addClass("content").appendTo(t)),i=($("<div/>").addClass("total").html("共<span>"+e.shuliang+"</span>件商品，合计:<span>￥"+e.shuliang*e.price+"</span>").appendTo(t),$("<div/>").addClass("btn").html("<span>付款</span><span>删除订单</span><span>查看物流</span>").appendTo(t)),s=$("<section/>").appendTo(a);$("<img/>").attr({src:e.img}).appendTo(s),$("<div/>").html("<span>"+e.name+"</span><span>￥"+e.price+"</span>").appendTo(s),$("<span/>").html(e.shuliang).appendTo(s),n.append(t),i.find("span").eq(1).singleTap(function(){var n=localStorage.getItem("buydata");if(n=n?JSON.parse(n):[],n.length>0){var e=$(this).parent().parent().index();$(this).parent().parent().remove(),console.log(e),n.splice(e,1),localStorage.setItem("buydata",JSON.stringify(n))}}),$(".type").on("singleTap","span",function(){$(this).css({color:"#F16E42"}).siblings().css({color:"#333"})})})})}(),function(){document.addEventListener("DOMContentLoaded",function(){var n=(document.querySelector(".caidan"),document.querySelector(".details"),1);$.ajax({type:"get",url:"../json/myvault.json",dataType:"json",async:!0,success:function(e){var o=$(".details");$.each(e,function(e,t){function a(){var n=$("<div/>");n.html("<span>"+t.type+"</span><span>"+t.balance+"</span><span>"+t.note+"</span><span>"+t.time+"</span>"),o.append(n)}1==n&&1==t.num&&a()})}}),$(window).on("scroll",function(){var e=$(window).scrollTop();if(e>=$(document).height()-$(window).height()-200){if(n++,n>15)return;console.log(n),$.ajax({type:"get",url:"../json/myvault.json",dataType:"json",async:!0,success:function(e){var o=$(".details");$.each(e,function(e,t){function a(){var n=$("<div/>");n.html("<span>"+t.type+"</span><span>"+t.balance+"</span><span>"+t.note+"</span><span>"+t.time+"</span>"),o.append(n)}n<5&&2==t.num&&a(),n<10&&n>5&&3==t.num&&a(),n<15&&n>10&&4==t.num&&a()})}})}})})}(),function(){document.addEventListener("DOMContentLoaded",function(){function n(){$.ajax({url:"../json/address.json",success:function(n){$.each(n,function(n,e){$("#list_1").val()==e.name?$(".city").find("option").remove():$("<option/>").attr("value",e.name).text(e.name).appendTo($(".province")),$.each(e.cities,function(n,e){$("<option/>").attr("value",e).text(e).appendTo($(".city"))})})}})}$("#province"),$("#city"),$("#county");n(),$("#list_1").on("change",function(){n()});var e=$("#username"),o=$("#telephone");d1=0,o.on("blur",function(){var n=$(this).val(),e=/^1[3578]\d{9}/g.test(n);e?d1=1:d1=0});var t=$(".btn"),e=$("#username"),o=$("#telephone"),a=$("#list_1"),i=$("#list_2"),s=$("#list_3"),l=$("#txt"),c=localStorage.getItem("datalist");c=c?JSON.parse(c):[],t.on("singleTap",function(){if(1==d1){var n={};n.username=e.val(),n.telephone=o.val(),n.address=a.val()+i.val()+s.val()+l.val(),c.push(n),localStorage.setItem("datalist",JSON.stringify(c)),alert("提交成功!"),open("center.html")}else alert("提交失败,手机号码不合格!")})})}(),$(function(){function n(){for(var n=document.getElementsByClassName("check"),e=0;e<n.length;e++){var o=n[e];o.checked=!o.checked}}function e(){for(var n=s.find("li").find(".check"),e=0,o=0;o<n.length;o++)if(n[o].checked){var t=$(n[o]).parent("li").find(".shuliang").val(),a=$(n[o]).parent("li").find(".price").html();e+=parseInt(a)*t}$("#buy").find("span").text(e)}var o=$(document),t=$("#nav_btn"),a=$("#nav_list");t.on("singleTap",function(){"none"==a.css("display")?a.show():a.hide()}),o.on("singleTap","section",function(){"block"==a.css("display")&&a.hide()});var i=localStorage.getItem("goodsdata");i=i?JSON.parse(i):[],function(){var n=$("#goods_list");if(0!=i.length)for(var e=0;e<i.length;e++){var o=$("<input/>").attr("type","checkbox");o.addClass("check");var t=$("<img/>").attr("src",i[e].img),a=$("<p/>"),s=$("<a/>").attr("href","#").html(i[e].name);s.addClass("name");var l=$("<span/>").html(i[e].price).addClass("price"),c=$("<i/>").addClass("number"),r=$("<button/>").addClass("minus").text("-"),d=$("<input/>").attr("src","text").val("1");d.addClass("shuliang");var p=$("<button/>").addClass("add").text("+"),u=$("<button/>").addClass("remove iconfont icon-lajixiang").text("删除");r.appendTo(c),d.appendTo(c),p.appendTo(c),s.appendTo(a),l.appendTo(a),u.appendTo(a),c.appendTo(a);var m=$("<li/>");o.appendTo(m),t.appendTo(m),a.appendTo(m),m.appendTo(n)}}();var s=$("#goods_list"),l=s.find("li").find(".minus");s.find("li").find(".add");s.on("singleTap",".add",function(){var n=($(this).parent().parent().parent().index(),$(this).prev("input").val());n++,$(this).prev("input").val(n),e()}),l.on("singleTap",function(){var n=$(this).next("input").val();1==n?n=1:n--,$(this).next("input").val(n),e()}),s.on("singleTap",".remove",function(){i=localStorage.getItem("goodsdata"),i=JSON.parse(i);var n=$(this).parent().parent().index();s.find("li").eq(n).remove(),i.splice(n,1),localStorage.setItem("goodsdata",JSON.stringify(i)),e()}),s.on("singleTap",".check",function(){e()}),$("#allcheck").on("singleTap",function(){n(),e()});var c=$("#buy"),r=localStorage.getItem("buydata");r=r?JSON.parse(r):[],console.log(c),c.on("touchstart",function(){var n=s.find("li").find(".check");i=localStorage.getItem("goodsdata"),i=JSON.parse(i);for(var e=n.length-1;e>-1;e--)if(n[e].checked){var o=$(n[e]).parent("li").find("img").attr("src"),t=$(n[e]).parent("li").find(".name").text(),a=$(n[e]).parent("li").find(".shuliang").val(),l=$(n[e]).parent("li").find(".price").html();r.push({name:t,shuliang:a,price:l,img:o}),i.splice(e,1),console.log(i)}localStorage.setItem("goodsdata",JSON.stringify(i)),localStorage.setItem("buydata",JSON.stringify(r))})}),function(n){function e(n,e,o,t){return Math.abs(n-e)>=Math.abs(o-t)?n-e>0?"Left":"Right":o-t>0?"Up":"Down"}function o(){d=null,u.last&&(u.el.trigger("longTap"),u={})}function t(){d&&clearTimeout(d),d=null}function a(){l&&clearTimeout(l),c&&clearTimeout(c),r&&clearTimeout(r),d&&clearTimeout(d),l=c=r=d=null,u={}}function i(n){return("touch"==n.pointerType||n.pointerType==n.MSPOINTER_TYPE_TOUCH)&&n.isPrimary}function s(n,e){return n.type=="pointer"+e||n.type.toLowerCase()=="mspointer"+e}var l,c,r,d,p,u={},$=750;n(document).ready(function(){var m,h,g,f,v=0,y=0;"MSGesture"in window&&(p=new MSGesture,p.target=document.body),n(document).bind("MSGestureEnd",function(n){var e=n.velocityX>1?"Right":n.velocityX<-1?"Left":n.velocityY>1?"Down":n.velocityY<-1?"Up":null;e&&(u.el.trigger("swipe"),u.el.trigger("swipe"+e))}).on("touchstart MSPointerDown pointerdown",function(e){(f=s(e,"down"))&&!i(e)||(g=f?e:e.touches[0],e.touches&&1===e.touches.length&&u.x2&&(u.x2=void 0,u.y2=void 0),m=Date.now(),h=m-(u.last||m),u.el=n("tagName"in g.target?g.target:g.target.parentNode),l&&clearTimeout(l),u.x1=g.pageX,u.y1=g.pageY,h>0&&h<=250&&(u.isDoubleTap=!0),u.last=m,d=setTimeout(o,$),p&&f&&p.addPointer(e.pointerId))}).on("touchmove MSPointerMove pointermove",function(n){(f=s(n,"move"))&&!i(n)||(g=f?n:n.touches[0],t(),u.x2=g.pageX,u.y2=g.pageY,v+=Math.abs(u.x1-u.x2),y+=Math.abs(u.y1-u.y2))}).on("touchend MSPointerUp pointerup",function(o){(f=s(o,"up"))&&!i(o)||(t(),u.x2&&Math.abs(u.x1-u.x2)>30||u.y2&&Math.abs(u.y1-u.y2)>30?r=setTimeout(function(){u.el&&(u.el.trigger("swipe"),u.el.trigger("swipe"+e(u.x1,u.x2,u.y1,u.y2))),u={}},0):"last"in u&&(v<30&&y<30?c=setTimeout(function(){var e=n.Event("tap");e.cancelTouch=a,u.el&&u.el.trigger(e),u.isDoubleTap?(u.el&&u.el.trigger("doubleTap"),u={}):l=setTimeout(function(){l=null,u.el&&u.el.trigger("singleTap"),u={}},250)},0):u={}),v=y=0)}).on("touchcancel MSPointerCancel pointercancel",a),n(window).on("scroll",a)}),["swipe","swipeLeft","swipeRight","swipeUp","swipeDown","doubleTap","tap","singleTap","longTap"].forEach(function(e){n.fn[e]=function(n){return this.on(e,n)}})}(Zepto),$(function(){var n=$(document),e=$("#nav_btn"),o=$("#nav_list");e.on("singleTap",function(){console.log(o.css("display")),"none"==o.css("display")?o.show():o.hide()}),n.on("singleTap","section",function(){"block"==o.css("display")&&o.hide()});for(var t=$("#checknum"),a=$("#get"),i=String(),s=0;s<4;s++)i+=parseInt(10*Math.random());t.text(i),a.on("singleTap",function(){i="",t.text("");for(var n=0;n<4;n++)i+=parseInt(10*Math.random());t.text(i)});var l=($("#register"),$("#warning")),c=!1,r=!1,d=!1,p=!1;$("#mobile").on("blur",function(){var n=/1[3578]\d{9}/,e=$("#mobile").val();return n.test(e)?(l.text(""),l.hide(),c=!0,void 0):(l.text("请输入正确手机号!"),l.show(),void(c=!1))}),$("#checknumber").on("blur",function(){var n=$("#checknumber").val(),e=t.text();return n!=e?(l.text("请输入正确验证码!"),l.show(),void(p=!1)):(l.text(""),l.hide(),p=!0,void 0)}),$("#mima1").on("blur",function(){var n=$("#mima1").val(),e=/^[a-zA-Z]\w{5,15}$/;return e.test(n)?(l.text(""),l.hide(),r=!0,void 0):(l.text("请输入正确密码!"),l.show(),void(r=!1))}),$("#mima2").on("blur",function(){var n=$("#mima1").val(),e=$("#mima2").val();return e!=n?(l.text("请输入相同密码!"),l.show(),void(c=!1)):(l.text(""),l.hide(),d=!0,void 0)});var u=$("#succeed"),m=$("#reg_btn"),h=localStorage.getItem("userdata");h=h?JSON.parse(h):[],m.on("singleTap",function(){if(console.log(c,r,d,p),c&&r&&d&&p){var n=$("#mobile").val(),e=$("#mima1").val();h.push({userphone:n,password:e}),localStorage.setItem("userdata",JSON.stringify(h)),u.show()}console.log(localStorage.getItem("userdata"))}),$("#close").on("singleTap",function(){u.hide()})});